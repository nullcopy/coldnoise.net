<nav class="flex items-center justify-between gap-4">
  <div class="flex items-center gap-3">
    <a href="{{ "/" | relURL }}" class="text-xl font-bold text-[var(--color-fg)] hover:text-[var(--color-accent)] transition-colors">
      {{ .Site.Title }}
    </a>
    <button type="button" aria-label="Toggle theme" data-theme-toggle class="p-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors cursor-pointer">
      <svg class="icon-moon w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
      </svg>
      <svg class="icon-sun w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2m0 16v2M22 12h-2M4 12H2m15.364 6.364-1.414-1.414M8.05 8.05 6.636 6.636m10.728 0L15.95 8.05M8.05 15.95 6.636 17.364"></path>
      </svg>
    </button>
  </div>

  <div class="flex items-center gap-2">
    <a href="{{ "/links/" | relURL }}" class="px-3 py-2 text-sm font-medium rounded-lg hover:bg-[var(--color-surface)] transition-colors">
      Links
    </a>

  {{ with site.Params.social }}
  <div class="relative">
    <button
      type="button"
      id="contact-dropdown-btn"
      aria-label="Contact menu"
      aria-expanded="false"
      aria-haspopup="true"
      class="p-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors cursor-pointer flex items-center gap-1 text-[var(--color-fg)]"
    >
      <span class="text-sm font-medium">Contact</span>
      <svg class="w-4 h-4 transition-transform" id="contact-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </button>

    <div
      id="contact-dropdown-menu"
      class="hidden absolute right-0 mt-2 py-2 px-1 bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg shadow-lg min-w-[200px] z-50"
      role="menu"
    >
      {{ with .linkedin }}
      <a
        href="{{ . }}"
        aria-label="LinkedIn"
        rel="me noopener"
        target="_blank"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4.98 3.5C4.98 4.6 4.1 5.5 3 5.5c-1.09 0-1.98-.9-1.98-2S1.91 1.5 3 1.5c1.1 0 1.98.9 1.98 2zM.5 22.5h5V7.5h-5v15zM8.5 7.5h4.8v2.03h.07c.67-1.18 2.32-2.43 4.78-2.43 5.11 0 6.05 3.36 6.05 7.72v7.68h-5v-6.8c0-1.62-.03-3.7-2.25-3.7-2.25 0-2.59 1.76-2.59 3.58v6.92h-5v-15z" />
        </svg>
        <span class="text-[var(--color-fg)]">LinkedIn</span>
      </a>
      {{ end }}
      {{ with .github }}
      <a
        href="{{ . }}"
        aria-label="GitHub"
        rel="me noopener"
        target="_blank"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2c-5.5 0-10 4.6-10 10.2 0 4.5 2.9 8.3 6.9 9.6.5.1.7-.2.7-.5v-2c-2.8.6-3.4-1.4-3.4-1.4-.4-1.1-1-1.4-1-1.4-.8-.6.1-.6.1-.6.9.1 1.3 1 1.3 1 .8 1.4 2.1 1 2.6.8.1-.6.3-1 .6-1.2-2.2-.3-4.5-1.1-4.5-5 0-1.1.4-2 1-2.7 0-.3-.4-1.2.1-2.5 0 0 .8-.3 2.8 1 .8-.2 1.6-.3 2.4-.3.8 0 1.6.1 2.4.3 2-1.3 2.8-1 2.8-1 .5 1.3.2 2.2.1 2.5.7.7 1 1.6 1 2.7 0 3.9-2.3 4.7-4.5 5 .3.3.6.8.6 1.6v2.4c0 .3.2.6.7.5 4-1.3 6.9-5.1 6.9-9.6C22 6.6 17.5 2 12 2z" />
        </svg>
        <span class="text-[var(--color-fg)]">GitHub</span>
      </a>
      {{ end }}
      {{ with .x }}
      <a
        href="{{ . }}"
        aria-label="X"
        rel="me noopener"
        target="_blank"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 3h4.5l3.1 4.5L15 3h5l-6 8 6 10h-4.5l-3.5-5.2L8 21H3l6.2-8.3L4 3z" />
        </svg>
        <span class="text-[var(--color-fg)]">Twitter</span>
      </a>
      {{ end }}
      {{ with .email }}
      <a
        href="{{ if hasPrefix . "mailto:" }}{{ . }}{{ else }}mailto:{{ . }}{{ end }}"
        aria-label="Email"
        rel="me noopener"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="5" width="18" height="14" rx="2" ry="2" />
          <path d="m3 7 9 6 9-6" />
        </svg>
        <span class="text-[var(--color-fg)]">Email</span>
      </a>
      {{ end }}
      {{ with .pgp }}
      <a
        href="{{ . }}"
        aria-label="PGP Key"
        rel="me noopener"
        target="_blank"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg>
        <span class="text-[var(--color-fg)]">PGP Key</span>
      </a>
      {{ end }}
      {{ with .zcash }}
      <a
        href="{{ . | relURL }}"
        aria-label="Zcash"
        class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[var(--color-surface)] transition-colors"
        role="menuitem"
      >
        <svg class="w-5 h-5" viewBox="270 270 540 540">
          <path d="m270,540c0-148.9,121.1-270,270-270s270,121.1,270,270-121.1,270-270,270-270-121.1-270-270Zm366.31-125.3v41.09l-114.28,155h114.28v54.5h-73.67v45.16h-45.28v-45.16h-73.67v-41.09l114.16-155h-114.16v-54.5h73.67v-45.28h45.28v45.28h73.67Z" fill="#f4b728" style="fill-rule: evenodd;"/>
        </svg>
        <span class="text-[var(--color-fg)]">Zcash</span>
      </a>
      {{ end }}
    </div>
  </div>

  <script>
    (function() {
      const btn = document.getElementById('contact-dropdown-btn');
      const menu = document.getElementById('contact-dropdown-menu');
      const icon = document.getElementById('contact-dropdown-icon');

      if (!btn || !menu || !icon) return;

      function toggleDropdown() {
        const isHidden = menu.classList.contains('hidden');

        if (isHidden) {
          menu.classList.remove('hidden');
          btn.setAttribute('aria-expanded', 'true');
          icon.style.transform = 'rotate(180deg)';
        } else {
          menu.classList.add('hidden');
          btn.setAttribute('aria-expanded', 'false');
          icon.style.transform = 'rotate(0deg)';
        }
      }

      function closeDropdown() {
        menu.classList.add('hidden');
        btn.setAttribute('aria-expanded', 'false');
        icon.style.transform = 'rotate(0deg)';
      }

      // Toggle on button click
      btn.addEventListener('click', toggleDropdown);

      // Close when clicking outside
      document.addEventListener('click', function(e) {
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
          closeDropdown();
        }
      });

      // Close on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeDropdown();
        }
      });
    })();
  </script>
  {{ end }}
  </div>
</nav>
